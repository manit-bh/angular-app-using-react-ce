(this["webpackJsonpds-boilerplate-react"]=this["webpackJsonpds-boilerplate-react"]||[]).push([[10],{41:function(t,a,i){"use strict";i.r(a),i.d(a,"bh_donut_chart",(function(){return s}));var e=i(6),o=i(12),n=i(13),l=i(19),d=i(51),r=(i(52),i(54)),s=function(){function t(a){Object(o.a)(this,t),Object(l.h)(this,a),this.bhEventChange=Object(l.d)(this,"bhEventChange",7),this.defaultPalette=[d.a.colorFill.dataVizDefault_1,d.a.colorFill.dataVizDefault_2,d.a.colorFill.dataVizDefault_3,d.a.colorFill.dataVizDefault_4,d.a.colorFill.dataVizDefault_5,d.a.colorFill.dataVizDefault_6,d.a.colorFill.dataVizDefault_7,d.a.colorFill.dataVizDefault_8],this.comparisonPalette=[d.a.colorFill.dataVizComparisonPrimary,d.a.colorFill.dataVizComparisonSecondary],this.height=400,this.legendLayout="vertical",this.disabledDatasetIndex=[],this.isMaxedOut=!1,this.toMax=0,this.dataToRender=[]}return Object(n.a)(t,[{key:"watchData",value:function(){var t;this._data="string"===typeof this.data?JSON.parse(this.data):this.data,this.originalDataStr=JSON.stringify(null===(t=this._data)||void 0===t?void 0:t.datasets[0].data),this.componentDidLoad()}},{key:"watchOption",value:function(){this._option="string"===typeof this.option?JSON.parse(this.option):this.option,this.componentDidLoad()}},{key:"watchLabel",value:function(){this._label="string"===typeof this.label?JSON.parse(this.label):this.label,this.componentDidLoad()}},{key:"watchChartOptionOverride",value:function(){this._chartOptionOverride="string"===typeof this.chartOptionOverride?JSON.parse(this.chartOptionOverride):this.chartOptionOverride,this.componentDidLoad()}},{key:"componentWillLoad",value:function(){var t;this._chartOptionOverride="string"===typeof this.chartOptionOverride?JSON.parse(this.chartOptionOverride):this.chartOptionOverride,this._data="string"===typeof this.data?JSON.parse(this.data):this.data,this._option="string"===typeof this.option?JSON.parse(this.option):this.option,this._label="string"===typeof this.label?JSON.parse(this.label):this.label,this.originalDataStr=JSON.stringify(null===(t=this._data)||void 0===t?void 0:t.datasets[0].data)}},{key:"componentDidLoad",value:function(){var t,a,i,o,n,l,s,c,h,u,p,v,g,b,y,f,m,_,x,O,w,D,k=this,S=this,F=this.element__canvas.getContext("2d");r.a.defaults.DoughnutWithDecoration=r.a.defaults.doughnut,r.a.controllers.DoughnutWithDecoration=r.a.controllers.doughnut.extend({draw:function(t){var a=S._chart.canvas.width/S._chart.canvas.height>=1?1:S._chart.canvas.width/S._chart.canvas.height,i=26/140*S.height/2;F.save(),F.beginPath(),F.arc(S._chart.width/2,S.height/2,a*S.height/2-a*(i/2)-1,0,2*Math.PI),F.lineWidth=i,F.strokeStyle=d.a.colors.base.gray_050,F.stroke(),F.restore(),r.a.controllers.doughnut.prototype.draw.call(this,t)}});var z=function(){var t,a;return"comparison"===(null===(t=S._option)||void 0===t?void 0:t.mode)?S.comparisonPalette:k.isMaxedOut?S.defaultPalette.slice(0,null===(a=k._data)||void 0===a?void 0:a.datasets[0].data.length):[].concat(Object(e.a)(S.defaultPalette.slice(0,k._data.datasets[0].data.length)),[d.a.colors.base.gray_050])};this.isMaxedOut=!((null===(a=null===(t=this._data)||void 0===t?void 0:t.datasets[0])||void 0===a?void 0:a.maxValue)&&(null===(o=null===(i=this._data)||void 0===i?void 0:i.datasets[0])||void 0===o?void 0:o.maxValue)>(null===(n=this._data)||void 0===n?void 0:n.datasets[0].data.reduce((function(t,a){return t+a}),0))),this.toMax=(null===(s=null===(l=this._data)||void 0===l?void 0:l.datasets[0])||void 0===s?void 0:s.maxValue)-(null===(c=this._data)||void 0===c?void 0:c.datasets[0].data.reduce((function(t,a){return t+a}),0)),this._chartOption=this.chartOptionOverride?this.chartOptionOverride:{type:"DoughnutWithDecoration",data:{backgroundColor:d.a.colorFill.commonSecondary,labels:null===(h=this._data)||void 0===h?void 0:h.labels,datasets:[{data:this.isMaxedOut?null===(p=null===(u=this._data)||void 0===u?void 0:u.datasets[0])||void 0===p?void 0:p.data:[].concat(Object(e.a)(null===(g=null===(v=this._data)||void 0===v?void 0:v.datasets[0])||void 0===g?void 0:g.data),[this.toMax]),lineTension:.05,borderWidth:0,borderColor:d.a.colors.base.white_100,hoverBorderColor:d.a.colors.base.white_100,hoverBorderWidth:1,backgroundColor:(null===(b=this._option)||void 0===b?void 0:b.styleOverride)&&(null===(f=null===(y=this._option)||void 0===y?void 0:y.styleOverride[0])||void 0===f?void 0:f.color)?this._option.styleOverride.map((function(t){return t.color})):z(),hoverBackgroundColor:(null===(m=this._option)||void 0===m?void 0:m.styleOverride)&&(null===(x=null===(_=this._option)||void 0===_?void 0:_.styleOverride[0])||void 0===x?void 0:x.color)?this._option.styleOverride.map((function(t){return t.color})):z(),pointRadius:0,pointHoverRadius:4,pointHitRadius:12}]},options:{cutoutPercentage:114/140*100,responsive:!0,tooltips:{enabled:!1,intersect:!1,mode:"nearest",caretSize:0,caretPadding:parseInt(d.a.spacing.paddingXsmall.replace("px","")),titleFontFamily:d.a.fontFamily.bodySmall,bodyFontFamily:d.a.fontFamily.bodySmall,titleSpacing:parseInt(d.a.spacing.paddingXxsmall.replace("px","")),bodySpacing:0,cornerRadius:d.a.effectBorderRadius.medium.replace("px",""),xPadding:parseInt(d.a.spacing.paddingXsmall.replace("px","")),yPadding:parseInt(d.a.spacing.paddingXxsmall.replace("px","")),custom:(null===(w=null===(O=this._option)||void 0===O?void 0:O.tooltipSetting)||void 0===w?void 0:w.isDisabled)?function(){}:function(t){var a,i=S.element__tooltip;if(0===t.opacity)return void(i.style.opacity="0");i.classList.remove("above","below","no-transform"),t.yAlign?i.classList.add(t.yAlign):i.classList.add("no-transform");if(t.body){var e=t.title||[],o=t.body.map((function(t){return t.lines})),n="<thead>";if(!S.disabledDatasetIndex.includes(t.dataPoints[0].index))e.forEach((function(t){n+="<tr><th>"+t+"</th></tr>"})),n+="</thead>",(null===(a=S._option.tooltipSetting)||void 0===a?void 0:a.title)&&(n+='<span class="typography--body-small-semi-bold bh-donut-chart--tooltip-title">'.concat(S._option.tooltipSetting.title,"</span>")),n+="<tbody>",o.forEach((function(a,i){var e,o,l,r,s,c,h,u,p=t.labelColors[i],v="background:"+p.backgroundColor;v+="; border-color:"+p.backgroundColor,v+="; border-width: "+d.a.effectBorderWidth.thick;var g='<div style="background-color: '+p.backgroundColor+"; width: ".concat(d.a.spacing.marginXsmall,"; height: ").concat(d.a.spacing.marginXsmall,"; border-radius: 50%; margin-right: ").concat(d.a.spacing.marginXsmall,';"></div>'),b='<span style="'+v+'"></span>',y="".concat(a[0].slice(0,a[0].indexOf(":")+2)).concat((null===(o=null===(e=S._option.tooltipSetting)||void 0===e?void 0:e.unit)||void 0===o?void 0:o.prefix)?null===(r=null===(l=S._option.tooltipSetting)||void 0===l?void 0:l.unit)||void 0===r?void 0:r.prefix:"").concat(S.getNumberToDisplay(parseFloat(a[0].slice(a[0].indexOf(": ")+2)))).concat((null===(c=null===(s=S._option.tooltipSetting)||void 0===s?void 0:s.unit)||void 0===c?void 0:c.suffix)?null===(u=null===(h=S._option.tooltipSetting)||void 0===h?void 0:h.unit)||void 0===u?void 0:u.suffix:"");n+='<tr><td><div style="display: flex; align-items: center;">'+g+b+y+"</div></td></tr>"})),n+="</tbody>",i.querySelector("table").innerHTML=n}var l=this._chart.canvas.getBoundingClientRect();i.style.opacity=t.dataPoints[0].index<S._data.datasets[0].data.length?"1":"0",i.style.textAlign="left",i.style.position="absolute";var r="horizontal"===S.legendLayout?2*l.width:l.width;if(t.caretX+t.width>.75*r){var s=t.caretX-.75*t.width-parseInt(d.a.spacing.marginXsmall.replace("px",""));i.style.left=(s<0?0:s)+"px"}else{var c=t.caretX+parseInt(d.a.spacing.marginXsmall.replace("px",""));i.style.left=(c>l.width?l.width:c)+"px"}S._data.datasets[0].data.length===S.disabledDatasetIndex.length&&(i.style.left="-9999px");i.style.top=t.caretY+t.height+"px",i.style.fontFamily=t._bodyFontFamily,i.style.fontSize=t.bodyFontSize+"px",i.style.fontStyle=t._bodyFontStyle,i.style.padding=t.yPadding+"px "+t.xPadding+"px",i.style.pointerEvents="none",i.style.transition="opacity ".concat(d.a.motionDuration.normal," ").concat(d.a.motionEasing.normal),i.style.color=t.dataPoints[0].index<S._data.datasets[0].data.length?d.a.colorText.commonInversePrimary:d.a.colorFill.controlUnselected,i.style.borderRadius=d.a.effectBorderRadius.medium,i.style.backgroundColor=t.dataPoints[0].index<S._data.datasets[0].data.length?d.a.colorFill.commonOverlay:d.a.colorFill.controlUnselected,i.style.zIndex="30"}},maintainAspectRatio:!1,legend:{position:"bottom",display:!1},legendCallback:function(t){return'<ul class="bh-donut-chart--legend">\n          '.concat(function(t){var a=t.data;return"".concat(a.datasets.map((function(t){return"".concat(a.labels.reduce((function(a,i,e){return a+'<li class="bh-donut-chart--legend-li  bh-donut-chart--legend-item">\n                <span class="bh-donut-chart--legend-item--dot" style="background-color: '.concat(t.backgroundColor[e],'"></span>\n                <span class="typography--label-small">').concat(i,"</span>\n              </li>")}),""))})))}(t),"\n        </ul>")}}},this._chart=new r.a(F,this._chartOption),(null===(D=this._option)||void 0===D?void 0:D.disableLegend)||(this.element__legends.innerHTML=this._chart.generateLegend(),this.bindLegendClickEvent())}},{key:"bindLegendClickEvent",value:function(){var t=this,a=this.element__legends.querySelectorAll(".bh-donut-chart--legend-li");a.forEach((function(i,o){i.addEventListener("click",(function(){var i;t.disabledDatasetIndex=t.disabledDatasetIndex.find((function(t){return t===o}))>-1?t.disabledDatasetIndex.filter((function(t){return t!==o})):[].concat(Object(e.a)(t.disabledDatasetIndex),[o]),t.disabledDatasetIndex.find((function(t){return t===o}))>-1?a[o].classList.add("hidden"):a[o].classList.remove("hidden");var n=Object(r.b)(t._option.mode,o),l=t.disabledDatasetIndex.find((function(t){return t===o}))>-1?"".concat(n):n,d=null===(i=t._option)||void 0===i?void 0:i.styleOverride[0].color,s=t.disabledDatasetIndex.find((function(t){return t===o}))>-1?"".concat(t._option.styleOverride[o].color):t._option.styleOverride[o].color;t._chart.data.datasets[0].backgroundColor[o]=d?s:l,t._chart.data.datasets[0].hoverBackgroundColor[o]=d?s:l,t._chart.data.datasets[0].data[o]=t.disabledDatasetIndex.find((function(t){return t===o}))>-1?0:JSON.parse(t.originalDataStr)[o],t._chart.update(),t.bhEventChange.emit({disabledDatasetIndex:t.disabledDatasetIndex})}))}))}},{key:"getNumberToDisplay",value:function(t){var a,i;return t?(null===(i=null===(a=this._label)||void 0===a?void 0:a.unit)||void 0===i?void 0:i.isShortScale)?t>1e12?"".concat(100*(t/1e12).toFixed(2)/100,"t"):t>1e9?"".concat(100*(t/1e9).toFixed(2)/100,"b"):t>1e6?"".concat(100*(t/1e6).toFixed(2)/100,"m"):t>1e3?"".concat(100*(t/1e3).toFixed(2)/100,"k"):"".concat(100*t.toFixed(2)/100):"".concat(100*t.toFixed(2)/100):"0"}},{key:"render",value:function(){var t,a,i,e,o,n,d,r,s,c,h,u,p,v,g,b,y,f,m,_,x,O=this,w=this.getNumberToDisplay((null===(a=null===(t=this._data)||void 0===t?void 0:t.datasets[0])||void 0===a?void 0:a.maxValue)&&!this.isMaxedOut?(null===(n=null===(o=null===(e=null===(i=this._chart)||void 0===i?void 0:i.data)||void 0===e?void 0:e.datasets[0])||void 0===o?void 0:o.data)||void 0===n?void 0:n.reduce((function(t,a){return t+a}),0))-this.toMax:null===(c=null===(s=null===(r=null===(d=this._chart)||void 0===d?void 0:d.data)||void 0===r?void 0:r.datasets[0])||void 0===s?void 0:s.data)||void 0===c?void 0:c.reduce((function(t,a){return t+a}),0));return Object(l.f)(l.a,{class:"bh-donut-chart ".concat("horizontal"===this.legendLayout?"horizontal":"")},Object(l.f)("div",{class:"bh-donut-chart-wrapper ".concat("horizontal"===this.legendLayout?"horizontal":""),style:{height:"".concat(this.height,"px")}},Object(l.f)("canvas",{width:"horizontal"===this.legendLayout?this.height:"",height:"horizontal"===this.legendLayout?this.height:"",ref:function(t){O.element__canvas=t}}),Object(l.f)("div",{class:"bh-donut-chart--label"},Object(l.f)("div",{class:"bh-donut-chart--label--wrapper ".concat((null===(h=this._label)||void 0===h?void 0:h.subheader)?"with-subheader":"")},Object(l.f)("span",{class:"bh-donut-chart--label--copy typography--title-small typography--color-primary"},(null===(p=null===(u=this._label)||void 0===u?void 0:u.unit)||void 0===p?void 0:p.prefix)?null===(g=null===(v=this._label)||void 0===v?void 0:v.unit)||void 0===g?void 0:g.prefix:"",(null===(b=this._label)||void 0===b?void 0:b.header)?this._label.header:w,(null===(f=null===(y=this._label)||void 0===y?void 0:y.unit)||void 0===f?void 0:f.suffix)?null===(_=null===(m=this._label)||void 0===m?void 0:m.unit)||void 0===_?void 0:_.suffix:""),(null===(x=this._label)||void 0===x?void 0:x.subheader)&&Object(l.f)("span",{class:"bh-donut-chart--label--copy typography--label-small typography--color-secondary"},this._label.subheader)))),Object(l.f)("div",{class:"horizontal"===this.legendLayout?"bh-donut-chart--horizontal-layout-legend-group":"bh-donut-chart--vertical-layout-legend-group",ref:function(t){O.element__legends=t}}),Object(l.f)("div",{ref:function(t){O.element__tooltip=t}},Object(l.f)("table",{class:"bink-calc__tooltip"})))}}],[{key:"watchers",get:function(){return{data:["watchData"],option:["watchOption"],label:["watchLabel"],chartOptionOverride:["watchChartOptionOverride"]}}}]),t}();s.style=".bh-donut-chart{display:block}.bh-donut-chart.horizontal{display:flex}.bh-donut-chart.horizontal .bh-donut-chart-wrapper{}.bh-donut-chart-wrapper{position:relative}.bh-donut-chart-wrapper.horizontal{display:flex;justify-content:center;width:50%}.bh-donut-chart--legend{list-style-type:none;margin-block-start:0;margin-block-end:0;margin-inline-start:0;margin-inline-end:0;padding-inline-start:0;display:flex;flex-wrap:wrap;justify-content:center;margin-top:calc(var(--spacing-margin-medium) - var(--spacing-margin-xxsmall))}.bh-donut-chart--legend-li{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-top:var(--spacing-margin-xxsmall)}.bh-donut-chart--legend-li.hidden{opacity:0.2}.bh-donut-chart--legend-item{display:flex;align-items:center;}.bh-donut-chart--legend-item--dot{width:8px;height:8px;border-radius:50%;display:block;margin-right:var(--spacing-margin-xsmall)}.bh-donut-chart--horizontal-layout-legend-group{width:50%;display:flex;justify-content:center}.bh-donut-chart--horizontal-layout-legend-group .bh-donut-chart--legend{display:table;margin-top:0}.bh-donut-chart--vertical-layout-legend-group .bh-donut-chart--legend{display:table;margin:var(--spacing-margin-medium) auto 0}.bh-donut-chart--vertical-layout-legend-group .bh-donut-chart--legend-li{margin-right:0}.bh-donut-chart--label{position:absolute;top:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}.bh-donut-chart--label--wrapper{text-align:center}.bh-donut-chart--label--wrapper.with-subheader{margin-top:12px}.bh-donut-chart--label--copy{display:block}.bh-donut-chart--tooltip-title{margin-bottom:var(--spacing-margin-xxsmall)}"}}]);
//# sourceMappingURL=10.32702e9e.chunk.js.map